<html>
  <head>
    <title> Sudoku </title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/Board.css')}}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
    <main>
      <ul>
        {% for row in row_wise_board %}
          {% for elements in row %}
            <li data-value = "squareNumber - {{ elements['squareNumber'] }} - cellNumber - {{ elements['cellNumber']}}" 
              onclick = "display(this)"><span>{{ elements["value"] }}</span></li>
          {% endfor %}
        {% endfor %}
      </ul>
    </main>
    <script>
      var serverAddress = "127.0.0.1"
      var portNumber = "5000"
      
      function display(cell){
        var value = prompt("Enter Value")
        if (value != null) {
          cellData = $(cell).attr('data-value').split("-")
          console.log(value)
          var cellObject = {}
          cellObject[cellData[0].trim()] = cellData[1]
          cellObject[cellData[2].trim()] = cellData[3]
          cellObject["value"] = value
          $.ajax({
            url: 'http://' + serverAddress + ':' + portNumber + '/api/v1/set_cell_value',
            dataType: "json",
            type: "POST",
            contentType: "application/json",
            xhrFields: { withCredentials: false },
            crossDomain: true,
            data: JSON.stringify(cellObject),
            success: function (data) {
              $(cell).first().html("1")
            },
            error: function (jqXHR, textStatus, errorThrown) {
              statusCode = (jqXHR.status);
              raiseError("Cannot set the value")
            }
          });
        }
        
      }
    </script>
  </body>
</html>